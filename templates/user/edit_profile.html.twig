{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/profile.css') }}">
{% endblock %}

{% block body %}
    <div class="profile-container">

        <!-- Colonne gauche : photo -->
        <div class="profile-avatar">
            {# Image affich√©e initialement #}
            <img id="preview-image"
                 src="{{ userProfile.picture ? asset(userProfile.picture) : asset('images/default-avatar.png') }}"
                 alt="Photo de {{ userProfile.pseudo }}"
                 style="max-width: 200px; max-height: 200px;" />
        </div>

        <!-- Colonne droite : formulaire -->
        <div class="profile-form">
            <h2>Mon profil</h2>

            {{ form_start(userForm, {'attr': {'enctype': 'multipart/form-data'}}) }}

            <table class="profile-table">
                <tr>
                    <td>{{ form_label(userForm.pseudo) }}</td>
                    <td>{{ form_widget(userForm.pseudo) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.firstname) }}</td>
                    <td>{{ form_widget(userForm.firstname) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.lastname) }}</td>
                    <td>{{ form_widget(userForm.lastname) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.phone) }}</td>
                    <td>{{ form_widget(userForm.phone) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.email) }}</td>
                    <td>{{ form_widget(userForm.email) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.password) }}</td>
                    <td>{{ form_widget(userForm.password) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.confirmation) }}</td>
                    <td>{{ form_widget(userForm.confirmation) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.site) }}</td>
                    <td>{{ form_widget(userForm.site) }}</td>
                </tr>
                <tr>
                    <td>{{ form_label(userForm.picture) }}</td>
                    <td>{{ form_widget(userForm.picture) }}</td>
                </tr>
            </table>

            <div class="profile-buttons">
                <button type="submit">Enregistrer</button>
                <a href="{{ path('app_user_profile', {'id': app.user.id}) }}">
                    <button type="button">Annuler</button>
                </a>
            </div>

            {{ form_end(userForm) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/profile-picture-preview.js') }}"></script>
{% endblock %}
